<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Dynamic Options Menu</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .options-container {
            margin: 20px;
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        }

        .options-item {
            margin-bottom: 10px;
            padding: 10px;
            background-color: #fff;
            border-radius: 4px;
        }

        label {
            margin-right: 10px;
            font-weight: bold;
            color: #333;
        }

        span {
            color: #555;
        }

        [contenteditable] {
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 5px;
            display: inline-block;
            min-width: 100px;
        }
    </style>
</head>

<body>
    <div class="options-container" id="optionsContainer"></div>
    <script src="menubar.js"></script>
    <script>
        // Function to build the options menu
        function buildOptionsMenu(optionsObject, containerElement) {
            for (const key in optionsObject) {
                if (optionsObject.hasOwnProperty(key)) {
                    const value = optionsObject[key];

                    // Create div for options item
                    const optionsItem = document.createElement('div');
                    optionsItem.className = 'options-item';

                    // Create label for the option
                    const optionLabel = document.createElement('label');
                    optionLabel.textContent = key + ':';

                    // Create span to display the option value
                    const optionValue = document.createElement('span');
                    optionValue.textContent = value;
                    optionValue.contentEditable = true;

                    // Append label and value to options item
                    optionsItem.appendChild(optionLabel);
                    optionsItem.appendChild(optionValue);

                    // Append options item to container
                    containerElement.appendChild(optionsItem);
                }
            }
        }


        // Listen for postMessage
        window.addEventListener('message', (event) => {
            // For security, check the origin
            // if (event.origin !== 'http://example.com') return; // Replace with the origin you expect

            // Get the data from the event
            const data = event.data;

            // Build options menu with the received data
            const optionsContainer = document.getElementById('optionsContainer');
            buildOptionsMenu(data.options.options, optionsContainer);
        }, false);

    </script>
</body>

</html>